= Пример инструкции для передачи utm-меток в кастомную CRM 

== 1) запись utm-меток в куки 
1.1) при появлении пользователя на сайте с параметрами в URL: 
- utm_source
- utm_medium
- utm_campaign
- utm_content
- utm_term
требуется создать в cookies или localstorage поле utm_markup

1.1) В поле utm_markup записываются значения указанных параметров

== 2) Запись referrer в куки
2.1) также, мы записываем поле referrer. Значение поля берётся из заголовка (HTTP Header) при начале сессии. 
2.2) Начало сессии определяется наличием этого поля в куке
2.3) referrer равный хосту нашего сайта игнорирутеся

== 3) Правила обновления кук
3.1) В случае, если пользователь делает действие, а кука еще жива, таймер сгорания куки expired_time обновляется до значения +30 минут
3.2) В случае, если пользователь приходит с новыми метками, то значение меток перезаписывается
3.3) при появлении меток заново происходит перезапись всех 5 параметров. Например, было доступно: utm_source=ya&utm_medium=cpc, а новая метка содержит только utm_campaing=test, то значение записи должно быть utm_campaing=test
3.4) в случае, если у пользователя в referrer заголовке появляется значение стороннего сайта, то значение параметра перезаписывается

== 4) Время жизни кук
4.1) Полям назначается expired time = +30 минут от текущего времени

== 5) Отправка кук в CRM 
5.1) При отправке лида в CRM мы забираем все значения полей и передаем в CRM.
